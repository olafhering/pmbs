# SLE-11-SP2 has -x86/-32bit versions
%if 0%{?sles_version} == 11 
Prefer: popt
Prefer: liblzma5
Prefer: libtheora0
Prefer: librcc0
%endif

#%if 0%{?suse_version} == 1210
#Prefer: libffi%{gcc_version}-32bit
#%endif
#
#%if %suse_version = 1110
#Prefer:     libcaca0
#%endif
#
#%if %suse_version > 1140
#Prefer:     libfam0
#%endif
#Prefer:     fam-devel
#
#%if %suse_version >= 1220
#Substitute: libxine1-devel libxine-devel=
#%endif
#
#%if %suse_version <= 1220
#Prefer: -lv2core-devel
#%endif
#
#%if 0%{?suse_version} < 1140
#Prefer: libsndfile1
#%endif
#
# OBS fails to understand that libportaudio2 obsoletes portaudio
#Prefer: libportaudio2
#
# needed because we have xz for older distros, and rpm needs it for SLE-11-SP2, with multiple providers:
#%if 0%{?suse_version} < 1140
#Prefer: liblzma5
#%endif


# Because of pkgconfig() type BuildRequires
#Prefer: -libffmpeg_oldabi-devel


#Substitute: bs2b-devel libbs2b-devel=
#Substitute: libopenjpeg-devel openjpeg-devel=

#%if 0%{?suse_version} < 1220
#Substitute: mjpegtools-devel libmjpegutils-devel=
#Prefer: -libcdio-mini-devel
#Prefer: -libxine1-devel
#%if %suse_version < 1210
#Prefer: -libquicktime
#Substitute: taglib-devel libtag-devel=
#Substitute: libunique1-devel libunique-devel=
#%if %suse_version < 1140
#Substitute: libschroedinger-devel schroedinger-devel=
#Substitute: libspeex-devel speex-devel=
#Substitute: libspeex1 libspeex=
#Substitute: libdirac-devel dirac-devel=
#Substitute: wxWidgets-devel wxGTK-devel=
#%endif
#%endif
#%endif
#%endif


# The XUL thing...
#%if 0%{?suse_version} < 1130
#Substitute: pkgconfig(libxul) mozilla-xulrunner192-devel=
#Substitute: pkgconfig(npapi-sdk) mozilla-xulrunner192-devel=
#%endif
#%if 0%{?suse_version} == 1140
#Prefer: mozilla-xulrunner20-devel
#Substitute: pkgconfig(npapi-sdk) mozilla-xulrunner20-devel=
#%endif
#%if 0%{?suse_version} >= 1210
#Prefer: xulrunner-devel
#%endif


# Support pkgconfig() BuildRequires in old distros
%if 0%{?suse_version} <= 1140
Substitute: pkgconfig(id3tag) libid3tag-devel=
%if 0%{?suse_version} <= 1120
Substitute: pkgconfig(alsa) alsa-devel=
Substitute: pkgconfig(cairo) cairo-devel=
Substitute: pkgconfig(enca) enca-devel=
Substitute: pkgconfig(fluidsynth) fluidsynth-devel=
Substitute: pkgconfig(fontconfig) fontconfig-devel=
Substitute: pkgconfig(freetype2) freetype2-devel
Substitute: pkgconfig(frei0r) frei0r-plugins-devel=
Substitute: pkgconfig(fribidi) fribidi-devel=
Substitute: pkgconfig(gdk-2.0) gtk2-devel=
Substitute: pkgconfig(gdk-pixbuf-2.0) gdk-pixbuf-devel=
Substitute: pkgconfig(gdk-x11-2.0) gtk2-devel=
Substitute: pkgconfig(gio-2.0) glib2-devel=
Substitute: pkgconfig(glib-2.0) glib2-devel=
Substitute: pkgconfig(gl) Mesa-devel=
Substitute: pkgconfig(gobject-2.0) glib2-devel=
Substitute: pkgconfig(gstreamer-0.10) gstreamer-0_10-devel=
Substitute: pkgconfig(gstreamer-base-0.10) gstreamer-0_10-devel=
Substitute: pkgconfig(gstreamer-controller-0.10) gstreamer-0_10-devel=
Substitute: pkgconfig(gstreamer-plugins-base-0.10) gstreamer-0_10-plugins-base-devel=
Substitute: pkgconfig(gthread-2.0) glib2-devel=
Substitute: pkgconfig(gtk+-2.0) gtk2-devel=
# Let's hope GTK2 is enough. GTK3 wasn't available until openSUSE 11.4
Substitute: pkgconfig(gtk+-3.0) gtk2-devel=
Substitute: pkgconfig(gtk+-x11-2.0) gtk2-devel=
Substitute: pkgconfig(jack) libjack-devel=
Substitute: pkgconfig(hunspell) hunspell-devel=
Substitute: pkgconfig(libass) libass-devel=
Substitute: pkgconfig(libavcodec) libffmpeg-devel=
Substitute: pkgconfig(libavdevice) libffmpeg-devel=
Substitute: pkgconfig(libavformat) libffmpeg-devel=
Substitute: pkgconfig(libavutil) libffmpeg-devel=
Substitute: pkgconfig(libswscale) libffmpeg-devel=
Substitute: pkgconfig(libbml) libbml-devel=
Substitute: pkgconfig(libdrm_intel) libdrm-devel=
Substitute: pkgconfig(libdrm) libdrm-devel=
Substitute: pkgconfig(libdv) libdv-devel=
Substitute: pkgconfig(liboil-0.3) liboil-devel=
Substitute: pkgconfig(libpng14) libpng14-devel=
Substitute: pkgconfig(libpng) libpng-devel=
Substitute: pkgconfig(libprojectM) libprojectM-devel=
Substitute: pkgconfig(libprojectM-qt) libprojectM-qt-devel=
Substitute: pkgconfig(libpulse) libpulse-devel=
Substitute: pkgconfig(libpulse-mainloop-glib) libpulse-devel=
Substitute: pkgconfig(libquicktime) libquicktime-devel=
Substitute: pkgconfig(libudev) libudev-devel=
Substitute: pkgconfig(libvlc) vlc-devel=
Substitute: pkgconfig(libxml-2.0) libxml2-devel=
Substitute: pkgconfig(lua) lua-devel=
Substitute: pkgconfig(openal) openal-devel=
Substitute: pkgconfig(orc-0.4) orc-devel=
Substitute: pkgconfig(pango) pango-devel=
Substitute: pkgconfig(pangoft2) pango-devel=
Substitute: pkgconfig(QtCore) libqt4-devel=
Substitute: pkgconfig(QtGui) libqt4-devel=
Substitute: pkgconfig(QtSvg) libqt4-devel=
Substitute: pkgconfig(QtXml) libqt4-devel=
Substitute: pkgconfig(samplerate) libsamplerate-devel=
Substitute: pkgconfig(SDL_gfx) SDL_gfx-devel=
Substitute: pkgconfig(sdl) SDL-devel=
Substitute: pkgconfig(sndfile) libsndfile-devel=
Substitute: pkgconfig(sox) sox-devel=
Substitute: pkgconfig(tsmux) libtsmux-devel=
Substitute: pkgconfig(vorbisfile) libvorbis-devel=
Substitute: pkgconfig(x11) xorg-x11-libX11-devel=
Substitute: pkgconfig(xext) xorg-x11-libXext-devel=
Substitute: pkgconfig(xfixes) xorg-x11-libXfixes-devel=
Substitute: pkgconfig(xi) xorg-x11-devel=
Substitute: pkgconfig(xmu) xorg-x11-libXmu-devel=
%endif
%endif

Support:    build-compare

# We have kdemultimedia4 because of ffmpegthumbs from kdemultimedia4-thumbnailers. We don't want the rest.
PublishFilter: ^dragonplayer-[0-9].*\.rpm$
ExportFilter: ^dragonplayer-[0-9].*\.rpm$
PublishFilter: ^juk-[0-9].*\.rpm$
ExportFilter: ^juk-[0-9].*\.rpm$
PublishFilter: ^kdemultimedia4-[0-9].*\.rpm$
ExportFilter: ^kdemultimedia4-[0-9].*\.rpm$
PublishFilter: ^kio_audiocd-[0-9].*\.rpm$
ExportFilter: ^kio_audiocd-[0-9].*\.rpm$
PublishFilter: ^kmix-[0-9].*\.rpm$
ExportFilter: ^kmix-[0-9].*\.rpm$
PublishFilter: ^kscd-[0-9].*\.rpm$
ExportFilter: ^kscd-[0-9].*\.rpm$
PublishFilter: ^libkcddb[0-9]+-[0-9].*\.rpm$
ExportFilter: ^libkcddb[0-9]+-[0-9].*\.rpm$
PublishFilter: ^libkcompactdisc[0-9]+-[0-9].*\.rpm$
ExportFilter: ^libkcompactdisc[0-9]+-[0-9].*\.rpm

%define _without_distributable 1
%define _without_onlynondistributable 1
%define _with_pulseaudio 1
%define _with_sdl 1
%define _with_aalib 1
%define _with_arts 1
%define _with_esd 1
%define _with_jack 1
%define _with_gnome_vfs 1
%define _with_directfb 1
%define _with_modplug 1
%define BUILD_ORIG 1
%define BUILD_ORIG_ADDON 1
%define _with_gamin 1
%define _with_cunit 1
%define _with_restricted 1
%define _with_libsidplay 1
%define _with_gme 1
%define _with_jbigkit 1
%define _with_ffmpeg 1
%define _with_mad 1
%define _with_lame 1
%define _with_twolame 1
%define _with_amrwb 1
%define _with_amrnb 1
%define _with_libmms 1
# Needed because of gstreamer-0_10-plugins-bad. Should dissapear in the future, once slv2 and lv2core 
# are in openSUSE.
%define _with_LV2 1

Macros:
%vendor http://packman.links2linux.de
%packager packman@links2linux.de
%packman_bs 1
%_without_distributable 1
%_without_onlynondistributable 1
%_with_pulseaudio 1
%_with_sdl 1
%_with_aalib 1
%_with_arts 1
%_with_esd 1
%_with_jack 1
%_with_gnome_vfs 1
%_with_directfb 1
%_with_modplug 1
%BUILD_ORIG 1
%BUILD_ORIG_ADDON 1
%_with_gamin 1
%_with_cunit 1
%_with_restricted 1
%_with_libsidplay 1
%_with_gme 1
%_with_jbigkit 1
%_with_ffmpeg 1
%_with_mad 1
%_with_lame 1
%_with_twolame 1
%_with_amrwb 1
%_with amrnb 1
%_with_libmms 1
%_with_LV2 1
